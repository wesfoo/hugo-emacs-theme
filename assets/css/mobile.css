/* Mobile CSS - Responsive Design
 * Emacs Blog Theme
 */

/* ============================================
   TABLET (< 1024px)
   ============================================ */
@media screen and (max-width: 1024px) {
  .article-meta {
    gap: 0.5em;
  }
  
  .article-word-count {
    display: none;
  }
}

/* ============================================
   MOBILE (< 768px)
   ============================================ */
@media screen and (max-width: 768px) {
  /* Hide menu items, show hamburger */
  .menu-bar .menu-item {
    display: none;
  }
  
  .menu-hamburger {
    display: block;
  }
  
  /* Mobile menu (shown when hamburger clicked) */
  .menu-bar.menu-open .menu-item {
    display: block;
  }
  
  .menu-bar.menu-open {
    flex-wrap: wrap;
  }
  
  .menu-bar.menu-open .menu-items {
    width: 100%;
    display: flex;
    flex-direction: column;
    order: 10;
  }
  
  .menu-bar.menu-open .menu-dropdown {
    position: static;
    box-shadow: none;
    border: none;
    border-top: 1px solid var(--menu-border);
    padding-left: 1em;
  }
  
  /* Simpler article list on mobile */
  .article-item {
    flex-wrap: wrap;
    padding: 0.5em 0.75em;
  }
  
  .article-meta {
    display: none;
  }
  
  .article-title {
    width: 100%;
    white-space: normal;
  }
  
  /* Modeline simplified */
  .modeline {
    font-size: 0.8rem;
  }
  
  .modeline-fill {
    display: none;
  }
  
  .modeline-minor-modes {
    display: none;
  }
  
  /* Echo area */
  .echo-area {
    font-size: 0.8rem;
    padding: 0.25em 0.5em;
  }
  
  /* Post content padding */
  .post-content {
    padding: 0.75em;
  }
  
  /* Search in menu */
  .menu-search {
    display: none;
  }
  
  /* Menu bar right */
  .menu-bar-right {
    margin-left: auto;
  }
  
  .menu-bar-title {
    display: none;
  }
}

/* ============================================
   SMALL MOBILE (< 480px)
   ============================================ */
@media screen and (max-width: 480px) {
  body {
    font-size: 0.9rem;
  }
  
  .article-item {
    padding: 0.5em;
  }
  
  .article-marker {
    width: 1em;
  }
  
  h1 { font-size: 1.3rem; }
  h2 { font-size: 1.15rem; }
  h3 { font-size: 1.05rem; }
  
  /* Smaller modeline */
  .modeline {
    font-size: 0.75rem;
    padding: 0.1em 0.25em;
  }
  
  /* Code blocks */
  pre code {
    font-size: 0.8rem;
    padding: 0.75em;
  }
  
  /* Theme toggle */
  .theme-toggle span:not(.icon) {
    display: none;
  }
}

/* ============================================
   TOUCH-SPECIFIC ADJUSTMENTS
   ============================================ */
@media (hover: none) and (pointer: coarse) {
  /* Larger touch targets */
  .article-item {
    min-height: 44px;
    padding: 0.75em;
  }
  
  .menu-dropdown-item {
    min-height: 44px;
    padding: 0.75em 1em;
  }
  
  /* Disable hover effects on touch */
  .article-item:hover {
    background-color: transparent;
  }
  
  .article-item:active {
    background-color: var(--list-hover-bg);
  }
  
  /* Hide keyboard hints */
  .keyhint,
  .menu-shortcut,
  .modeline-keyhint {
    display: none;
  }
  
  /* Echo area shows tap hints instead */
  .echo-area .keyboard-hints {
    display: none;
  }
  
  .echo-area .touch-hints {
    display: block;
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */
@media print {
  .menu-bar,
  .modeline,
  .echo-area,
  .buffer.buffer-list {
    display: none !important;
  }
  
  .emacs-frame {
    height: auto;
    overflow: visible;
  }
  
  .buffer-container {
    display: block;
  }
  
  .buffer.buffer-content {
    display: block;
    border: none;
  }
  
  .buffer-body {
    overflow: visible;
  }
  
  body {
    background: white;
    color: black;
    font-size: 12pt;
  }
  
  a {
    color: black;
    text-decoration: underline;
  }
  
  pre, code {
    background: #f5f5f5;
    border: 1px solid #ddd;
  }
}

/* ============================================
   LANDSCAPE MOBILE
   ============================================ */
@media screen and (max-width: 896px) and (orientation: landscape) {
  .menu-bar {
    padding: 0;
  }
  
  .menu-item > button,
  .menu-link {
    padding: 0.25em 0.5em;
  }
  
  .modeline {
    min-height: 1.5em;
    font-size: 0.75rem;
  }
  
  .echo-area {
    min-height: 1.3em;
    padding: 0.15em 0.5em;
  }
}

/* ============================================
   HIGH DPI DISPLAYS
   ============================================ */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* Ensure crisp borders */
  .buffer,
  .modeline,
  .menu-bar,
  .echo-area,
  pre,
  .highlight pre {
    border-width: 0.5px;
  }
}

/* ============================================
   PREFERS REDUCED MOTION
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
